## Алгоритм запуска и раскатки сервера майнкрафт

> Данный репозиторий должен присутствовать на локальный машине для раскатки сервера
> Или через Github Desktop
> Или просто скачав репозиторий архивом

### 1. Необходимо убедиться в доступности и работоспособности сервера.
Для этого необходимо:
1. Открыть SSH-клиент (например, Bitvise SSH)
2. Войти на сервер, либо получить какой-либо ответ от него (например, форму аутентификации).
Вариант с входом на сервер - предпочтительный, так как в позже нам это понадобится.

### 2. Открыть Git Bash и проверить запущен ли Docker Engine

### 3. Сформировать Docker-образ Ansible, если это ещё не сделано
Выполняется это следующим образом:  
> В Git Bash переходим в директорию репозитория и выполняем:  
> `docker build . -t ansible`  
> Проверяем наличие образа с помощью:  
> `docker images`  

### 4. Запустить Ansible-скрипт
> Выполняем в Git Bash:  
> `winpty docker run --rm -it -v /$(pwd):/ansible/playbooks ansible -i inventory.ini minecraft-deployment.yaml -u root -k`  
> После чего передаем запрашиваемый пароль от сервера и следим за выполнением скрипта  
Выполнение скрипта должно сопровождаться зелеными статусами `ok` в запускаемых задачах (`TASK`).  
Возникновение желтых статусов `changed` является нормальным поведением и свидетельстует о каких-либо изменениях на сервере при выполнении задачи  
(Появление этих статусов будет всегда для задач по удалению и созданию файлов stdin, например)  

### 5. Проверить работоспособность и статус запущенного Minecraft-сервера
> 1. Переходим в SSH-клиент и выполняем `tail -f /server/console.out`  
> 2. Смотрим отдаваемые сервером сообщения, успешный запуск (свидетельством являеется сообщение `Done (...)! For help, type "help"`)  
> 3. Заходим на minecraft-сервер по тому же ip-адресу, что и адрес сервера и смотрим за соответствующими логами в ответе minecraft-сервера  


### Остановка сервера
`echo stop >> /server/console.in` с предварительным предупреждением игроков через /say в игре или через консоль (`echo say >> /server/console.in`)

### Запуск сервера
`winpty docker run --rm -it -v /$(pwd):/ansible/playbooks ansible -i inventory.ini minecraft-deployment.yaml --tags run -u root -k` в Git Bash.  
